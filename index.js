function ajaxCall(e,t,n,a){var o=new XMLHttpRequest,c=[];for(var s in e)c.push(s+"="+encodeURIComponent(e[s]));c=c.join("&").replace(/%20/g,"+"),o.onreadystatechange=function(){4===o.readyState&&(200===o.status?a&&a(JSON.parse(o.responseText)):a(o.status))},o.open(t,n),o.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),o.send(c)}!function(){function e(e,t){var n=m.cloneNode(!1),a=p.cloneNode(!1);n.setAttribute("class","url"),n.setAttribute("target","_blank"),n.href=t.link,a.setAttribute("class","avatar avatar-50 photo"),a.setAttribute("alt",t.name),a.src=t.avatar,n.appendChild(a),e.appendChild(n)}function t(e){var t=m.cloneNode(!1),n=m.cloneNode(!1);t.setAttribute("class","cs-button cs-button-sm submit"),t.href="#",t.innerHTML="Submit",n.setAttribute("class","cs-button cs-button-sm cs-button-cancel cancel"),n.href="#",n.innerHTML="Cancel",e.appendChild(t),e.appendChild(n)}function n(e,t){var n=document.createElement("textarea");n.setAttribute("name","body"),n.setAttribute("rows","4"),n.setAttribute("placeholder","Reply to "+t+" here....."),e.appendChild(n)}function a(a,o,c,s){var r=u.cloneNode(!1),l=u.cloneNode(!1),d=document.createElement("form");r.setAttribute("class","cs-comment-form cs-comment-form-reply cs-comment-child cs-media"),r.setAttribute("id","form-reply"),a.getAttribute("data-depth")>=2&&r.classList.add("cs-comment-no-indent"),d.setAttribute("class","cs-media-content"),d.setAttribute("data-parent",s),l.setAttribute("class","cs-comment-image cs-media-image"),e(l,o),n(d,c),t(d),r.appendChild(l),r.appendChild(d),a.insertBefore(r,a.firstElementChild.nextSibling)}function o(t,n,a,o){console.log(n);var c=u.cloneNode(!1),s=u.cloneNode(!1),r=u.cloneNode(!1),d=u.cloneNode(!1),i=u.cloneNode(!1),p=u.cloneNode(!1),b=h.cloneNode(!1),f=h.cloneNode(!1),g=m.cloneNode(!1),y=document.createTextNode("-"),N=document.createTextNode(a),C=!0===o?"cs-comment-parent":"cs-comment-child";i.setAttribute("class","cs-media-image cs-comment-image"),e(i,n),b.setAttribute("class","cs-comment-author-name"),b.appendChild(document.createTextNode(n.name)),f.setAttribute("class","cs-comment-date"),f.appendChild(document.createTextNode("1 second ago")),g.setAttribute("class","url"),g.setAttribute("target","_blank"),g.href=n.link,g.appendChild(b),r.setAttribute("class","cs-comment-author cs-flex-row"),r.appendChild(g),r.appendChild(y),r.appendChild(f),d.setAttribute("class","cs-comment-text"),d.appendChild(N),p.setAttribute("class","cs-media-content cs-flex-column cs-flex-grow"),p.appendChild(r),p.appendChild(d),s.setAttribute("class","cs-comment cs-media"),s.appendChild(i),s.appendChild(p),c.setAttribute("class",C),t.getAttribute("data-depth")>=2&&c.classList.add("cs-comment-no-indent"),c.appendChild(s),o?t.insertBefore(c,t.firstElementChild):t.insertBefore(c,t.firstElementChild.nextSibling),l()}function c(t,n,a){var o=u.cloneNode(!1),c=u.cloneNode(!1),s=u.cloneNode(!1),r=u.cloneNode(!1),l=u.cloneNode(!1),d=!0===a?"cs-comment-parent":"cs-comment-child";c.setAttribute("class","cs-media-image cs-comment-image"),e(c,n),o.setAttribute("class","loader"),o.appendChild(document.createTextNode("Loading...")),s.setAttribute("class",d),s.setAttribute("id","loader"),t.getAttribute("data-depth")>=2&&s.classList.add("cs-comment-no-indent"),r.setAttribute("class","cs-media-content cs-flex-column cs-flex-grow"),r.appendChild(o),l.setAttribute("class","cs-comment cs-media"),l.appendChild(c),l.appendChild(r),s.appendChild(l),a?t.insertBefore(s,t.firstElementChild):t.insertBefore(s,t.firstElementChild.nextSibling)}function s(e){for(var t=e.parentNode.querySelectorAll(".cs-button"),n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n]);A=null,e.value=""}function r(e){e.parentNode.removeChild(e)}function l(){var e=Number(i.textContent);e+=1,i.innerHTML=e}var d=document.getElementById("form-master"),i=document.getElementById("count"),m=document.createElement("a"),u=document.createElement("div"),p=document.createElement("img"),h=document.createElement("span");if(d){var b,f,g=document.getElementById("comment-box"),y=document.getElementById("master-body"),N=g.getAttribute("data-type"),C=g.getAttribute("data-spice"),A=null;ajaxCall({},"GET","/comment/get_user",function(e){f=e}),y.addEventListener("focus",function(e){b=document.getElementById("form-reply"),A||(t(y.parentNode),A=y.parentNode.querySelectorAll(".cs-button"),b&&r(b))}),g.addEventListener("click",function(e){var t=e.target,n=t.getAttribute("data-id")||t.parentNode.getAttribute("data-parent"),l=t.parentNode.parentNode.parentNode.parentNode.parentNode;if(m=document.getElementById("form-reply"),t.classList.contains("cancel")&&(e.preventDefault(),t.parentNode.parentNode===m?r(m):t.parentNode===d&&s(y)),t.classList.contains("submit")){var i=document.getElementById("comments"),m=document.getElementById("form-reply"),u={before:!1,category:N,message:t.parentNode.body.value,name:f.name,parent:t.parentNode===d?"0":n,spice:C},p={name:u.name,parent_id:u.parent,body:u.message};e.preventDefault(),u.message&&(u.location=t.parentNode===d?i:t.parentNode.parentNode.parentNode,t.parentNode===d?(s(y),u.before=!0):r(m),c(u.location,f,u.before),ajaxCall(p,"POST","/comment/submit/"+N+"/"+C,function(e){var t=document.getElementById("loader");e>=200&&e<300||(u.message="An error was encountered while submiting your comment, Please try again later"),r(t),o(u.location,f,u.message,u.before)}))}if(t.classList.contains("reply")){var h=t.getAttribute("data-name");e.preventDefault(),A&&s(y),m&&r(m),a(l,f,h,n)}})}}(),function(){function e(e){var t=screen.height/2-325,n=screen.width/2-512;window.open(e,"CinnamonSpicesOAuthLoginWindow","width=1024,height=650,top="+t+",left="+n+",toolbar=no,location=no,resizable=no,scrollbars=no,status=0,centerscreen=yes")}for(var t=document.getElementsByClassName("oauth-link"),n=0;n<t.length;n++)t[n].addEventListener("click",function(t){t.preventDefault();var n=this,a=document.getElementById("lnkLoginFacebook"),o=document.getElementById("lnkLoginGoogle"),c=document.getElementById("lnkLoginGitHub");n===a&&e("/auth/facebook"),n===o&&e("/auth/google"),n===c&&e("/auth/github")})}(),function(){function e(){for(var e=document.querySelectorAll("a.cs-xlet-search-results-link"),t=0;t<e.length;t++)e[t].parentElement.className=t===c?"active":""}function t(e){s=e;var t=e.length;if(o.innerHTML="",t>0){a.style.display="block";for(var n="",c=0;c<(t>10?10:t);c++){var r=e[c][d];n+="<li>",n+='<a class="cs-xlet-search-results-link" id="cs-xlet-search-result-link-'+c+'" href="/'+l+"/view/"+r+'">',e[c].icon&&(n+='<img src="'+e[c].icon+'"/>'),n+=e[c].name,n+="</a>",n+="</li>"}o.innerHTML=n}else a.style.display="none"}var n=document.getElementById("cs-xlet-search-input"),a=document.getElementById("cs-xlet-search-results-container"),o=document.getElementById("cs-xlet-search-results-list"),c=-1,s=[],r="",l="",d="id";n&&a&&(n.onkeyup=function(n){n&&n.target&&r&&l&&(38===n.keyCode?c>=0&&(c-=1,e()):40===n.keyCode?(c<9&&(c+=1),e()):27===n.keyCode?(c=-1,a.style.display="none"):13===n.keyCode?c>=0&&document.querySelector("#cs-xlet-search-result-link-"+c).click():ajaxCall({q:n.target.value},"POST",r,t))},n.dataset.searchUrl&&(r=n.dataset.searchUrl),n.dataset.searchType&&(l=n.dataset.searchType),"themes"===l&&(d="uuid")),document.querySelector("body").onclick=function(){a&&(a.style.display="none")}}();